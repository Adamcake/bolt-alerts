import{b as _e,g as y,d as ne,r as ae,a as re,p as pe,I as H,c as se,e as $,i as be,m as Y,s as X,E as ge,f as me,h as he,j as we,k as ye,l as xe,n as ke,o as Ee,q as Se,t as L,u as F,v as Ue,w as Re,x as Ie,y as q,z as Ae,L as Pe,A as Te,S as Oe,B as Le,C as De,P as Ne,D as Ce,R as Me,F as j,G as K,H as $e,J as Fe,K as qe,M as oe,N as le,O as He,Q as Ve,T as ie,U as C,V as S,W as N,X as ue,Y as T,Z as ce,_ as Be,$ as We,a0 as ze,a1 as Ye}from"./legacy-DoMErUV9.js";import{p as Ge}from"./proxy-DVRdaLaX.js";let de=!1;function Je(e,t){return t}function Xe(e,t,n,a){for(var r=[],u=t.length,_=0;_<u;_++)me(t[_].e,r,!0);var m=u>0&&r.length===0&&n!==null;if(m){var v=n.parentNode;he(v),v.append(n),a.clear(),P(e,t[0].prev,t[u-1].next)}we(r,()=>{for(var p=0;p<u;p++){var o=t[p];m||(a.delete(o.k),P(e,o.prev,o.next)),ye(o.e,!m)}})}function je(e,t,n,a,r,u=null){var _=e,m={items:new Map,first:null},v=null,p=!1,o=ne(()=>{var f=n();return Se(f)?f:f==null?[]:se(f)});_e(()=>{var f=y(o),c=f.length;p&&c===0||(p=c===0,Ke(f,m,_,r,t,a,n),u!==null&&(c===0?v?ae(v):v=re(()=>u(_)):v!==null&&pe(v,()=>{v=null})),y(o))})}function Ke(e,t,n,a,r,u,_){var m=e.length,v=t.items,p=t.first,o=p,f,c=null,w=[],s=[],i,b,l,d;for(d=0;d<m;d+=1){if(i=e[d],b=u(i,d),l=v.get(b),l===void 0){var A=o?o.e.nodes_start:n;c=Ze(A,t,c,c===null?t.first:c.next,i,b,d,a,r,_),v.set(b,c),w=[],s=[],o=c.next;continue}if(Qe(l,i,d),l.e.f&H&&ae(l.e),l!==o){if(f!==void 0&&f.has(l)){if(w.length<s.length){var U=s[0],h;c=U.prev;var R=w[0],g=w[w.length-1];for(h=0;h<w.length;h+=1)Q(w[h],U,n);for(h=0;h<s.length;h+=1)f.delete(s[h]);P(t,R.prev,g.next),P(t,c,R),P(t,g,U),o=U,c=g,d-=1,w=[],s=[]}else f.delete(l),Q(l,o,n),P(t,l.prev,l.next),P(t,l,c===null?t.first:c.next),P(t,c,l),c=l;continue}for(w=[],s=[];o!==null&&o.k!==b;)o.e.f&H||(f??(f=new Set)).add(o),s.push(o),o=o.next;if(o===null)continue;l=o}w.push(l),c=l,o=l.next}if(o!==null||f!==void 0){for(var E=f===void 0?[]:se(f);o!==null;)o.e.f&H||E.push(o),o=o.next;var x=E.length;if(x>0){var I=null;Xe(t,E,I,v)}}$.first=t.first&&t.first.e,$.last=c&&c.e}function Qe(e,t,n,a){be(e.v,t),e.i=n}function Ze(e,t,n,a,r,u,_,m,v,p){var o=(v&ke)!==0,f=(v&Ee)===0,c=o?f?Y(r):X(r):r,w=v&ge?X(_):_,s={i:w,v:c,k:u,a:null,e:null,prev:n,next:a};try{return s.e=re(()=>m(e,c,w,p),de),s.e.prev=n&&n.e,s.e.next=a&&a.e,n===null?t.first=s:(n.next=s,n.e.next=s.e),a!==null&&(a.prev=s,a.e.prev=s.e),s}finally{}}function Q(e,t,n){for(var a=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,u=e.e.nodes_start;u!==a;){var _=xe(u);r.before(u),u=_}}function P(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function fe(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=fe(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function et(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=fe(e))&&(a&&(a+=" "),a+=t);return a}function tt(e){return typeof e=="object"?et(e):e??""}function nt(e,t,n){var a=e.__className,r=at(t);(a!==r||de)&&(t==null?e.removeAttribute("class"):e.className=r,e.__className=r)}function at(e,t){return(e??"")+""}function ve(e,t,n){if(e==null)return t(void 0),L;const a=F(()=>e.subscribe(t,n));return a.unsubscribe?()=>a.unsubscribe():a}const O=[];function Z(e,t=L){let n=null;const a=new Set;function r(m){if(Ue(e,m)&&(e=m,n)){const v=!O.length;for(const p of a)p[1](),O.push(p,e);if(v){for(let p=0;p<O.length;p+=2)O[p][0](O[p+1]);O.length=0}}}function u(m){r(m(e))}function _(m,v=L){const p=[m,v];return a.add(p),a.size===1&&(n=t(r,u)||L),m(e),()=>{a.delete(p),a.size===0&&n&&(n(),n=null)}}return{set:r,update:u,subscribe:_}}function B(e){let t;return ve(e,n=>t=n)(),t}let M=!1,W=Symbol();function rt(e,t,n){const a=n[t]??(n[t]={store:null,source:Y(void 0),unsubscribe:L});if(a.store!==e&&!(W in n))if(a.unsubscribe(),a.store=e??null,e==null)a.source.v=void 0,a.unsubscribe=L;else{var r=!0;a.unsubscribe=ve(e,u=>{r?a.source.v=u:q(a.source,u)}),r=!1}return e&&W in n?B(e):y(a.source)}function st(){const e={};function t(){Re(()=>{for(var n in e)e[n].unsubscribe();Ie(e,W,{enumerable:!1,value:!0})})}return[e,t]}function ot(e,t,n){return e.set(n),t}function lt(e){var t=M;try{return M=!1,[e(),M]}finally{M=t}}function ee(e){for(var t=$,n=$;t!==null&&!(t.f&(Ce|Me));)t=t.parent;try{return j(t),e()}finally{j(n)}}function it(e,t,n,a){var R;var r=(n&qe)!==0,u=!De||(n&Ne)!==0,_=(n&$e)!==0,m=!1,v;[v,m]=lt(()=>e[t]);var p=Oe in e||Le in e,o=(((R=Ae(e,t))==null?void 0:R.set)??(p&&t in e&&(g=>e[t]=g)))||void 0,f=a,c=!0,w=!1,s=()=>(w=!0,c&&(c=!1,f=a),f),i;if(u)i=()=>{var g=e[t];return g===void 0?s():(c=!0,w=!1,g)};else{var b=ee(()=>(r?K:ne)(()=>e[t]));b.f|=Pe,i=()=>{var g=y(b);return g!==void 0&&(f=void 0),g===void 0?f:g}}if(o){var l=e.$$legacy;return function(g,E){return arguments.length>0?((!u||!E||l||m)&&o(E?i():g),g):i()}}var d=!1,A=!1,U=Y(v),h=ee(()=>K(()=>{var g=i(),E=y(U);return d?(d=!1,A=!0,E):(A=!1,U.v=g)}));return h.equals=Te,function(g,E){if(Fe!==null&&(d=A,i(),y(U)),arguments.length>0){const x=E?y(h):u&&_?Ge(g):g;return h.equals(x)||(d=!0,q(U,x),w&&f!==void 0&&(f=x),F(()=>y(h))),g}return y(h)}}const k=[];for(let e=0;e<256;++e)k.push((e+256).toString(16).slice(1));function ut(e,t=0){return(k[e[t+0]]+k[e[t+1]]+k[e[t+2]]+k[e[t+3]]+"-"+k[e[t+4]]+k[e[t+5]]+"-"+k[e[t+6]]+k[e[t+7]]+"-"+k[e[t+8]]+k[e[t+9]]+"-"+k[e[t+10]]+k[e[t+11]]+k[e[t+12]]+k[e[t+13]]+k[e[t+14]]+k[e[t+15]]).toLowerCase()}let V;const ct=new Uint8Array(16);function dt(){if(!V){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");V=crypto.getRandomValues.bind(crypto)}return V(ct)}const ft=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),te={randomUUID:ft};function z(e,t,n){var r;if(te.randomUUID&&!e)return te.randomUUID();e=e||{};const a=e.random??((r=e.rng)==null?void 0:r.call(e))??dt();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ut(a)}const vt=()=>fetch("https://bolt-api/send-message",{method:"POST",body:new Uint8Array([1,0])});var _t=(e,t,n)=>t(y(n),!1),pt=C('<button class="h-[14px] w-[14px] pointer-events-auto"><img src="plugin://app/images/caret-down-solid.svg" class="w-full h-full" alt="Hide"></button>'),bt=(e,t,n)=>t(y(n),!0),gt=C('<button class="h-[14px] w-[14px] pointer-events-auto"><img src="plugin://app/images/caret-down-solid.svg" class="w-full h-full rotate-270" alt="Expand"></button>'),mt=(e,t,n)=>t(y(n)),ht=(e,t,n)=>t(y(n)),wt=(e,t,n)=>t(y(n)),yt=C('<div><!> <button class="absolute rounded-lg right-0 top-0 h-[18px] w-[18px] hover:bg-red-500 pointer-events-auto py-0 by-0" title="Delete"><img src="plugin://app/images/xmark-solid.svg" class="w-full h-full" alt="Delete"></button> <button class="absolute rounded-lg right-[18px] top-0 h-[18px] w-[18px] hover:bg-blue-400 pointer-events-auto py-0 by-0" title="Edit"><img src="plugin://app/images/gear-solid.svg" class="absolute top-[2px] left-[2px] w-[14px] h-[14px]" alt="Edit"></button> <button class="absolute rounded-lg right-[36px] top-0 h-[18px] w-[18px] hover:bg-emerald-400 pointer-events-auto py-0 by-0" title="Add rule"><img src="plugin://app/images/plus-solid.svg" class="w-full h-full" alt="Add rule"></button></div>'),xt=C('<div><!> <button class="rounded-sm my-1 px-2 py-1 bg-emerald-400 pointer-events-auto hover:opacity-75">Add ruleset</button></div>');function kt(e,t){le(t,!1);const[n,a]=st(),r=()=>rt(_(),"$list",n);new URLSearchParams(window.location.search),window.addEventListener("message",s=>{if(!s.data||typeof s.data!="object"||s.data.type!=="pluginMessage")return;const i=new Uint16Array(s.data.content.slice(0,2))[0];switch(i){case 1:const b=new URLSearchParams(new TextDecoder().decode(s.data.content.slice(2)));let l=b.get("id"),d;l?d=B(_())[l]:l=z(),ot(_(),F(r)[l]={id:l,name:b.get("name"),rules:d?d.rules:{},expanded:d?d.expanded:!1,alert:d?d.alert:!1,doFlashWindow:b.get("flash_window")==="1",sound:b.get("sound")??void 0,volume:parseInt(b.get("volume")),onlyIfUnfocused:b.get("only_if_unfocused")==="1"},F(r));break;default:console.error(`unknown message type ${i}`)}});let u=ce(!1),_=it(t,"list",12);const m=s=>{let i={id:s.id,name:s.name,only_if_unfocused:s.onlyIfUnfocused?"1":"0",flash_window:s.doFlashWindow?"1":"0",volume:s.volume.toString()};s.sound&&(i.sound=s.sound);const b="\0".concat(new URLSearchParams(i).toString());fetch("https://bolt-api/send-message",{method:"POST",body:b})},v=s=>{let i={ruleset_id:s.id};const b="\0".concat(new URLSearchParams(i).toString());fetch("https://bolt-api/send-message",{method:"POST",body:b})},p=s=>{const i=B(_());delete i[s.id],_().set(i)},o=(s,i)=>{s.expanded=i,_(_())};He(()=>(r(),y(u)),()=>{const s=r();if(y(u)||Object.keys(s).length>0,y(u)){const i=Object.values(s).map(l=>({id:l.id,name:l.name,rules:Object.values(l.rules).map(d=>({ruletype:d.ruletype,number:d.number,ref:d.ref,comparator:d.comparator,find:d.find})),doFlashWindow:l.doFlashWindow,sound:l.sound,volume:l.volume,onlyIfUnfocused:l.onlyIfUnfocused})),b="\0".concat(JSON.stringify(i));fetch("https://bolt-api/send-message",{method:"POST",body:b})}else q(u,!0)}),Ve(),ie();var f=xt(),c=T(f);je(c,1,()=>Object.values(r()),Je,(s,i,b)=>{var l=yt();nt(l,tt(b&1?"relative w-full bg-gray-200 b-0 text-[8pt]":"relative w-full bg-gray-300 b-0 text-[8pt]"));var d=T(l);{var A=x=>{var I=pt();I.__click=[_t,o,i],N(x,I)},U=x=>{var I=gt();I.__click=[bt,o,i],N(x,I)};Be(d,x=>{y(i).expanded?x(A):x(U,!1)})}var h=S(d),R=S(h);R.__click=[mt,p,i];var g=S(R,2);g.__click=[ht,m,i];var E=S(g,2);E.__click=[wt,v,i],We(()=>ze(h,` ${y(i).name??""} `)),N(s,l)});var w=S(c,2);w.__click=[vt],N(e,f),ue(),a()}oe(["click"]);const Et=()=>fetch("https://bolt-api/close-request");var St=(e,t)=>{e.button===0&&t("-1","-1")},Ut=(e,t)=>{e.button===0&&t("0","-1")},Rt=(e,t)=>{e.button===0&&t("1","-1")},It=(e,t)=>{e.button===0&&t("-1","0")},At=(e,t)=>{e.button===0&&t("1","0")},Pt=(e,t)=>{e.button===0&&t("-1","1")},Tt=(e,t)=>{e.button===0&&t("0","1")},Ot=(e,t)=>{e.button===0&&t("1","1")},Lt=(e,t)=>{e.button===0&&t("0","0")},Dt=C('<main><div class="absolute grid grid-cols-[5px_auto_5px] grid-rows-[5px_auto_5px] top-0 left-0 bottom-0 right-0 z-100 pointer-events-none"><div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="pointer-events-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div></div> <div class="m-[7px] w-auto h-auto"><div class="m-0 p-0 border-b border-black absolute top-[5px] right-[5px] w-[18px] h-[19px]"><button class="m-0 p-0 absolute top-0 left-0 w-full h-full select-none text-center text-[12px] bg-[hsl(0,70%,50%)] hover:bg-[hsl(0,100%,50%)]">X</button></div> <div class="m-0 p-0 border-b border-black absolute left-[5px] top-[5px] right-[23px] h-[19px] bg-[grey] text-center text-[10pt]"><p class="m-0 p-0 color-black select-none pointer-events-none">Alerts</p></div> <div class="fixed top-[24px] bottom-[6px] left-[6px] right-[6px] text-[10pt] pointer-events-none"><!></div></div></main>');function Nt(e,t){le(t,!1);const n=new URLSearchParams(window.location.search);let a=ce((h=>{const R=h.get("list");if(!R)return Z({});const g=JSON.parse(atob(R));let E={};for(const x of g){let I={};for(const D of x.rules){const J=z();I[J]={id:J,ruletype:D.ruletype,alert:!1,number:D.number,ref:D.ref,comparator:D.comparator,find:D.find}}const G=z();E[G]={id:G,name:x.name,rules:I,expanded:!1,alert:!1,doFlashWindow:x.doFlashWindow,sound:x.sound,volume:x.volume,onlyIfUnfocused:x.onlyIfUnfocused}}return Z(E)})(n));const r=(h,R)=>fetch("https://bolt-api/start-reposition?".concat(new URLSearchParams({h,v:R}).toString()));ie();var u=Dt(),_=T(u),m=T(_);m.__mousedown=[St,r];var v=S(m,2);v.__mousedown=[Ut,r];var p=S(v,2);p.__mousedown=[Rt,r];var o=S(p,2);o.__mousedown=[It,r];var f=S(o,4);f.__mousedown=[At,r];var c=S(f,2);c.__mousedown=[Pt,r];var w=S(c,2);w.__mousedown=[Tt,r];var s=S(w,2);s.__mousedown=[Ot,r];var i=S(_,2),b=T(i),l=T(b);l.__click=[Et];var d=S(b,2);d.__mousedown=[Lt,r];var A=S(d,2),U=T(A);kt(U,{get list(){return y(a)},set list(h){q(a,h)},$$legacy:!0}),N(e,u),ue()}oe(["mousedown","click"]);Ye(Nt,{target:document.body});
