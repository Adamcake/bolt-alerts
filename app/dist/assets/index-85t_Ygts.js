import{S as H,o as ge,a as pe,s as A,b as me,g as x,U as S,c as k,d as V,e as $,f as he,h as we,i as te,j as ye,k as ae,r as re,l as se,p as xe,I as W,m as ie,n as Ee,q as J,E as Ie,t as Re,u as Se,v as Ue,w as ke,x as Pe,y as Ae,z as Ne,A as L,B,C as Oe,D as Te,F as De,L as Le,G as Ce,H as Me,J as $e,P as Fe,K as qe,R as He,M as K,N as X,O as Ve,Q as Be,T as le,V as ue,W as We,X as ze,Y as oe,Z as F,_ as I,$ as M,a0 as fe,a1 as O,a2 as de,a3 as Ye,a4 as Ge,a5 as Je,a6 as Ke}from"./legacy-DVQDreaG.js";let ce=!1;function D(e,n=null,t){if(typeof e!="object"||e===null||H in e)return e;const r=we(e);if(r!==ge&&r!==pe)return e;var s=new Map,c=te(e),b=A(0);c&&s.set("length",A(e.length));var g;return new Proxy(e,{defineProperty(f,i,a){(!("value"in a)||a.configurable===!1||a.enumerable===!1||a.writable===!1)&&he();var u=s.get(i);return u===void 0?(u=A(a.value),s.set(i,u)):k(u,D(a.value,g)),!0},deleteProperty(f,i){var a=s.get(i);if(a===void 0)i in f&&s.set(i,A(S));else{if(c&&typeof i=="string"){var u=s.get("length"),o=Number(i);Number.isInteger(o)&&o<u.v&&k(u,o)}k(a,S),j(b)}return!0},get(f,i,a){var d;if(i===H)return e;var u=s.get(i),o=i in f;if(u===void 0&&(!o||(d=V(f,i))!=null&&d.writable)&&(u=A(D(o?f[i]:S,g)),s.set(i,u)),u!==void 0){var l=x(u);return l===S?void 0:l}return Reflect.get(f,i,a)},getOwnPropertyDescriptor(f,i){var a=Reflect.getOwnPropertyDescriptor(f,i);if(a&&"value"in a){var u=s.get(i);u&&(a.value=x(u))}else if(a===void 0){var o=s.get(i),l=o==null?void 0:o.v;if(o!==void 0&&l!==S)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return a},has(f,i){var l;if(i===H)return!0;var a=s.get(i),u=a!==void 0&&a.v!==S||Reflect.has(f,i);if(a!==void 0||$!==null&&(!u||(l=V(f,i))!=null&&l.writable)){a===void 0&&(a=A(u?D(f[i],g):S),s.set(i,a));var o=x(a);if(o===S)return!1}return u},set(f,i,a,u){var P;var o=s.get(i),l=i in f;if(c&&i==="length")for(var d=a;d<o.v;d+=1){var _=s.get(d+"");_!==void 0?k(_,S):d in f&&(_=A(S),s.set(d+"",_))}o===void 0?(!l||(P=V(f,i))!=null&&P.writable)&&(o=A(void 0),k(o,D(a,g)),s.set(i,o)):(l=o.v!==S,k(o,D(a,g)));var m=Reflect.getOwnPropertyDescriptor(f,i);if(m!=null&&m.set&&m.set.call(u,a),!l){if(c&&typeof i=="string"){var v=s.get("length"),y=Number(i);Number.isInteger(y)&&y>=v.v&&k(v,y+1)}j(b)}return!0},ownKeys(f){x(b);var i=Reflect.ownKeys(f).filter(o=>{var l=s.get(o);return l===void 0||l.v!==S});for(var[a,u]of s)u.v!==S&&!(a in f)&&i.push(a);return i},setPrototypeOf(){me()}})}function j(e,n=1){k(e,e.v+n)}function Xe(e,n){return n}function je(e,n,t,r){for(var s=[],c=n.length,b=0;b<c;b++)Re(n[b].e,s,!0);var g=c>0&&s.length===0&&t!==null;if(g){var f=t.parentNode;Se(f),f.append(t),r.clear(),N(e,n[0].prev,n[c-1].next)}Ue(s,()=>{for(var i=0;i<c;i++){var a=n[i];g||(r.delete(a.k),N(e,a.prev,a.next)),ke(a.e,!g)}})}function Ze(e,n,t,r,s,c=null){var b=e,g={items:new Map,first:null},f=null,i=!1,a=ae(()=>{var u=t();return te(u)?u:u==null?[]:ie(u)});ye(()=>{var u=x(a),o=u.length;i&&o===0||(i=o===0,Qe(u,g,b,s,n,r,t),c!==null&&(o===0?f?re(f):f=se(()=>c(b)):f!==null&&xe(f,()=>{f=null})),x(a))})}function Qe(e,n,t,r,s,c,b){var g=e.length,f=n.items,i=n.first,a=i,u,o=null,l=[],d=[],_,m,v,y;for(y=0;y<g;y+=1){if(_=e[y],m=c(_,y),v=f.get(m),v===void 0){var P=a?a.e.nodes_start:t;o=nn(P,n,o,o===null?n.first:o.next,_,m,y,r,s,b),f.set(m,o),l=[],d=[],a=o.next;continue}if(en(v,_,y),v.e.f&W&&re(v.e),v!==a){if(u!==void 0&&u.has(v)){if(l.length<d.length){var R=d[0],h;o=R.prev;var U=l[0],p=l[l.length-1];for(h=0;h<l.length;h+=1)Z(l[h],R,t);for(h=0;h<d.length;h+=1)u.delete(d[h]);N(n,U.prev,p.next),N(n,o,U),N(n,p,R),a=R,o=p,y-=1,l=[],d=[]}else u.delete(v),Z(v,a,t),N(n,v.prev,v.next),N(n,v,o===null?n.first:o.next),N(n,o,v),o=v;continue}for(l=[],d=[];a!==null&&a.k!==m;)a.e.f&W||(u??(u=new Set)).add(a),d.push(a),a=a.next;if(a===null)continue;v=a}l.push(v),o=v,a=v.next}if(a!==null||u!==void 0){for(var w=u===void 0?[]:ie(u);a!==null;)a.e.f&W||w.push(a),a=a.next;var C=w.length;if(C>0){var be=null;je(n,w,be,f)}}$.first=n.first&&n.first.e,$.last=o&&o.e}function en(e,n,t,r){Ee(e.v,n),e.i=t}function nn(e,n,t,r,s,c,b,g,f,i){var a=(f&Ae)!==0,u=(f&Ne)===0,o=a?u?J(s):A(s):s,l=f&Ie?A(b):b,d={i:l,v:o,k:c,a:null,e:null,prev:t,next:r};try{return d.e=se(()=>g(e,o,l,i),ce),d.e.prev=t&&t.e,d.e.next=r&&r.e,t===null?n.first=d:(t.next=d,t.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function Z(e,n,t){for(var r=e.next?e.next.e.nodes_start:t,s=n?n.e.nodes_start:t,c=e.e.nodes_start;c!==r;){var b=Pe(c);s.before(c),c=b}}function N(e,n,t){n===null?e.first=t:(n.next=t,n.e.next=t&&t.e),t!==null&&(t.prev=n,t.e.prev=n&&n.e)}function ve(e){var n,t,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(n=0;n<s;n++)e[n]&&(t=ve(e[n]))&&(r&&(r+=" "),r+=t)}else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function tn(){for(var e,n,t=0,r="",s=arguments.length;t<s;t++)(e=arguments[t])&&(n=ve(e))&&(r&&(r+=" "),r+=n);return r}function an(e){return typeof e=="object"?tn(e):e??""}function rn(e,n,t){var r=e.__className,s=sn(n);(r!==s||ce)&&(n==null?e.removeAttribute("class"):e.className=s,e.__className=s)}function sn(e,n){return(e??"")+""}function _e(e,n,t){if(e==null)return n(void 0),L;const r=B(()=>e.subscribe(n,t));return r.unsubscribe?()=>r.unsubscribe():r}const T=[];function Q(e,n=L){let t=null;const r=new Set;function s(g){if(Oe(e,g)&&(e=g,t)){const f=!T.length;for(const i of r)i[1](),T.push(i,e);if(f){for(let i=0;i<T.length;i+=2)T[i][0](T[i+1]);T.length=0}}}function c(g){s(g(e))}function b(g,f=L){const i=[g,f];return r.add(i),r.size===1&&(t=n(s,c)||L),g(e),()=>{r.delete(i),r.size===0&&t&&(t(),t=null)}}return{set:s,update:c,subscribe:b}}function Y(e){let n;return _e(e,t=>n=t)(),n}let q=!1,G=Symbol();function ln(e,n,t){const r=t[n]??(t[n]={store:null,source:J(void 0),unsubscribe:L});if(r.store!==e&&!(G in t))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=L;else{var s=!0;r.unsubscribe=_e(e,c=>{s?r.source.v=c:k(r.source,c)}),s=!1}return e&&G in t?Y(e):x(r.source)}function un(){const e={};function n(){Te(()=>{for(var t in e)e[t].unsubscribe();De(e,G,{enumerable:!1,value:!0})})}return[e,n]}function on(e,n,t){return e.set(t),n}function fn(e){var n=q;try{return q=!1,[e(),q]}finally{q=n}}function ee(e){for(var n=$,t=$;n!==null&&!(n.f&(qe|He));)n=n.parent;try{return K(n),e()}finally{K(t)}}function dn(e,n,t,r){var U;var s=(t&Be)!==0,c=!$e||(t&Fe)!==0,b=(t&Ve)!==0,g=!1,f;[f,g]=fn(()=>e[n]);var i=H in e||Me in e,a=(((U=V(e,n))==null?void 0:U.set)??(i&&n in e&&(p=>e[n]=p)))||void 0,u=r,o=!0,l=!1,d=()=>(l=!0,o&&(o=!1,u=r),u),_;if(c)_=()=>{var p=e[n];return p===void 0?d():(o=!0,l=!1,p)};else{var m=ee(()=>(s?X:ae)(()=>e[n]));m.f|=Le,_=()=>{var p=x(m);return p!==void 0&&(u=void 0),p===void 0?u:p}}if(a){var v=e.$$legacy;return function(p,w){return arguments.length>0?((!c||!w||v||g)&&a(w?_():p),p):_()}}var y=!1,P=!1,R=J(f),h=ee(()=>X(()=>{var p=_(),w=x(R);return y?(y=!1,P=!0,w):(P=!1,R.v=p)}));return h.equals=Ce,function(p,w){if(arguments.length>0){const C=w?x(h):c&&b?D(p):p;return h.equals(C)||(y=!0,k(R,C),l&&u!==void 0&&(u=C),B(()=>x(h))),p}return x(h)}}const E=[];for(let e=0;e<256;++e)E.push((e+256).toString(16).slice(1));function cn(e,n=0){return(E[e[n+0]]+E[e[n+1]]+E[e[n+2]]+E[e[n+3]]+"-"+E[e[n+4]]+E[e[n+5]]+"-"+E[e[n+6]]+E[e[n+7]]+"-"+E[e[n+8]]+E[e[n+9]]+"-"+E[e[n+10]]+E[e[n+11]]+E[e[n+12]]+E[e[n+13]]+E[e[n+14]]+E[e[n+15]]).toLowerCase()}let z;const vn=new Uint8Array(16);function _n(){if(!z){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");z=crypto.getRandomValues.bind(crypto)}return z(vn)}const bn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ne={randomUUID:bn};function gn(e,n,t){var s;if(ne.randomUUID&&!e)return ne.randomUUID();e=e||{};const r=e.random??((s=e.rng)==null?void 0:s.call(e))??_n();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,cn(r)}const pn=()=>fetch("https://bolt-api/send-message",{method:"POST",body:new Uint8Array([1,0])});var mn=(e,n,t)=>n(x(t),!1),hn=F('<button class="h-[14px] w-[14px] pointer-events-auto"><img src="plugin://app/images/caret-down-solid.svg" class="w-full h-full" alt="Hide"></button>'),wn=(e,n,t)=>n(x(t),!0),yn=F('<button class="h-[14px] w-[14px] pointer-events-auto"><img src="plugin://app/images/caret-down-solid.svg" class="w-full h-full rotate-270" alt="Expand"></button>'),xn=(e,n,t)=>n(x(t)),En=(e,n,t)=>n(x(t)),In=F('<div><!> <button class="absolute rounded-lg right-0 top-0 h-[18px] w-[18px] hover:bg-red-500 pointer-events-auto py-0 by-0" title="Delete"><img src="plugin://app/images/xmark-solid.svg" class="w-full h-full" alt="Delete"></button> <button class="absolute rounded-lg right-[18px] top-0 h-[18px] w-[18px] hover:bg-blue-400 pointer-events-auto py-0 by-0" title="Edit"><img src="plugin://app/images/gear-solid.svg" class="w-full h-full" alt="Edit"></button></div>'),Rn=F('<div><!> <button class="rounded-sm my-1 px-2 py-1 bg-emerald-400 pointer-events-auto hover:opacity-75">Add ruleset</button></div>');function Sn(e,n){ue(n,!1);const[t,r]=un(),s=()=>ln(b(),"$list",t);new URLSearchParams(window.location.search),window.addEventListener("message",l=>{if(!l.data||typeof l.data!="object"||l.data.type!=="pluginMessage")return;const d=new Uint16Array(l.data.content.slice(0,2))[0];switch(d){case 1:const _=new URLSearchParams(new TextDecoder().decode(l.data.content.slice(2)));let m=_.get("id"),v;m?v=Y(b())[m]:m=gn(),on(b(),B(s)[m]={id:m,name:_.get("name"),rules:v?v.rules:{},expanded:v?v.expanded:!1,alert:v?v.alert:!1,doFlashWindow:_.get("flash_window")==="1",sound:_.get("sound")??void 0,volume:parseInt(_.get("volume")),onlyIfUnfocused:_.get("only_if_unfocused")==="1"},B(s));break;default:console.error(`unknown message type ${d}`)}});let c=de(!1),b=dn(n,"list",12);const g=l=>{let d={id:l.id,name:l.name,only_if_unfocused:l.onlyIfUnfocused?"1":"0",flash_window:l.doFlashWindow?"1":"0",volume:l.volume.toString()};l.sound&&(d.sound=l.sound);const _="\0".concat(new URLSearchParams(d).toString());fetch("https://bolt-api/send-message",{method:"POST",body:_})},f=l=>{const d=Y(b());delete d[l.id],b().set(d)},i=(l,d)=>{l.expanded=d,b(b())};We(()=>(x(c),s()),()=>{if(x(c)){const l=Object.values(s()).map(_=>({id:_.id,name:_.name,rules:[],doFlashWindow:_.doFlashWindow,sound:_.sound,volume:_.volume,onlyIfUnfocused:_.onlyIfUnfocused})),d="\0".concat(JSON.stringify(l));fetch("https://bolt-api/send-message",{method:"POST",body:d})}else k(c,!0)}),ze(),oe();var a=Rn(),u=O(a);Ze(u,1,()=>Object.values(s()),Xe,(l,d,_)=>{var m=In();rn(m,an(_&1?"relative w-full bg-gray-300 b-0 text-[8pt]":"relative w-full bg-gray-200 b-0 text-[8pt]"));var v=O(m);{var y=p=>{var w=hn();w.__click=[mn,i,d],M(p,w)},P=p=>{var w=yn();w.__click=[wn,i,d],M(p,w)};Ye(v,p=>{x(d).expanded?p(y):p(P,!1)})}var R=I(v),h=I(R);h.__click=[xn,f,d];var U=I(h,2);U.__click=[En,g,d],Ge(()=>Je(R,` ${x(d).name??""} `)),M(l,m)});var o=I(u,2);o.__click=[pn],M(e,a),fe(),r()}le(["click"]);const Un=()=>fetch("https://bolt-api/close-request");var kn=(e,n)=>{e.button===0&&n("-1","-1")},Pn=(e,n)=>{e.button===0&&n("0","-1")},An=(e,n)=>{e.button===0&&n("1","-1")},Nn=(e,n)=>{e.button===0&&n("-1","0")},On=(e,n)=>{e.button===0&&n("1","0")},Tn=(e,n)=>{e.button===0&&n("-1","1")},Dn=(e,n)=>{e.button===0&&n("0","1")},Ln=(e,n)=>{e.button===0&&n("1","1")},Cn=(e,n)=>{e.button===0&&n("0","0")},Mn=F('<main><div class="absolute grid grid-cols-[5px_auto_5px] grid-rows-[5px_auto_5px] top-0 left-0 bottom-0 right-0 z-100 pointer-events-none"><div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="pointer-events-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div> <div class="bg-black pointer-events-auto select-none"></div></div> <div class="m-[7px] w-auto h-auto"><div class="m-0 p-0 b-0 absolute top-[5px] right-[5px] w-[18px] h-[18px]"><button class="m-0 p-0 b-0 absolute top-0 left-0 w-full h-full select-none text-center text-[12px] bg-[hsl(0,70%,50%)] hover:bg-[hsl(0,100%,50%)]">X</button></div> <div class="m-0 p-0 b-0 absolute left-[5px] top-[5px] right-[23px] h-[18px] bg-[grey] text-center text-[10pt]"><p class="m-0 p-0 b-0 color-black select-none pointer-events-none">Alerts</p></div> <div class="fixed top-[24px] bottom-[6px] left-[6px] right-[6px] text-[10pt] pointer-events-none"><!></div></div></main>');function $n(e,n){ue(n,!1);const t=new URLSearchParams(window.location.search);let r=de((h=>{const U=h.get("list");if(!U)return Q({});const p=JSON.parse(atob(U));return Q(p.map(w=>({id:w.id,name:w.name,rules:{},expanded:!1,alert:!1,doFlashWindow:w.doFlashWindow,sound:w.sound,volume:w.volume,onlyIfUnfocused:w.onlyIfUnfocused})))})(t));const s=(h,U)=>fetch("https://bolt-api/start-reposition?".concat(new URLSearchParams({h,v:U}).toString()));oe();var c=Mn(),b=O(c),g=O(b);g.__mousedown=[kn,s];var f=I(g,2);f.__mousedown=[Pn,s];var i=I(f,2);i.__mousedown=[An,s];var a=I(i,2);a.__mousedown=[Nn,s];var u=I(a,4);u.__mousedown=[On,s];var o=I(u,2);o.__mousedown=[Tn,s];var l=I(o,2);l.__mousedown=[Dn,s];var d=I(l,2);d.__mousedown=[Ln,s];var _=I(b,2),m=O(_),v=O(m);v.__click=[Un];var y=I(m,2);y.__mousedown=[Cn,s];var P=I(y,2),R=O(P);Sn(R,{get list(){return x(r)},set list(h){k(r,h)},$$legacy:!0}),M(e,c),fe()}le(["mousedown","click"]);Ke($n,{target:document.body});
